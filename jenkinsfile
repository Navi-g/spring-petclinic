pipeline {
    agent {label 'SPC'}
    triggers {
        pollSCM('* * * * *')
        }
    stages{
      stage('Prerequisit') {
          steps {
              sh sudo apt update;sudo apt install openjdk-8-jdk -y;sudo apt install maven -y
          }
      }  
      stage('SCM'){
          steps {
              git branch: 'master', url:'https://github.com/Navi-g/spring-petclinic.git'
          }
      }
      stage('Prerequisit'){
          steps {
              sh 'mvn clean package'
          }
      }
    }
    post {
        success{
            echo +env.BUILD_ID+ 'successfull'
            archive '**/gameoflife.war'
            junit '**/TEST-*.xml'
                }
        failure{
            echo +env.BUILD_ID+ 'Faild'
            mail subject: 'BUILD Failed '+env.BUILD_ID+'URL is '+env.BUILD_URL, to: 'devops@qt.com', from: 'jenkins@qt.com', body: 'EMPTY BODY'
            }  
        }
    
      
}